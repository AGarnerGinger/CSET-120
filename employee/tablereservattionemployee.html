<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Baratie | Reservation</title>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="../style.css">
        <link href="https://fonts.googleapis.com/css2?family=Marcellus&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">

        <style>
            body{
                background-image:url("../images/baratieplanks.png");
                font-family: 'Marcellus', serif;   
            }
            .table{
                background-color: grey;
                width: 300px;
                height: 300px;
                border: 5px solid black;
                border-radius: 200px;
            }

            .table-row{
                display: flex;
                flex-direction: row;
                justify-content: space-around;
                padding: 50px 0 50px 0;

            }
            .reserved{
                background-color: blue;
                pointer-events: none;
            }
            .tables{
                margin-top: 200px;
            }

            .table p{
                align-items: center;
                text-align: center;
                justify-content: center;
                font-size: 40px;
                padding-top: 80px; 
            }
            </style>
    </head>
    <body>
    <header class="main-header">
        <nav class="navbar">
                    <div class="nav-left">
                        <a href="index.html"><img src="../images/baratie_transparent-2.png" class="navlogo"></a>
                        <span class="nav-title">Baratie</span>
                    </div>
                    <ul class="nav-links">
                        <li><a href="../index.html">Customer Home</a></li>
                        <li><a href="accepted.html">Accepted Orders</a></li>
                        <li><a href="inventory.html">Inventory</a></li>
                        <li><a href="order-manager.html">Order Management</a></li>
                        <li><a href="tablereservattionemployee.html">Reservations</a></li>
                    </ul>
        </nav>
    </header>
        <section>
            <div class="tables">
                <div class="table-row">
                    <div class="table available"><p>Table 1</p></div>
                    <div class="table available"><p>Table 2</p></div>
                </div>
                <div class="table-row">
                    <div class="table available"><p>Table 3</p></div>
                    <div class="table available"><p>Table 4</p></div>
                    <div class="table available"><p>Table 5</p></div>
                </div>
                <div class="table-row">
                    <div class="table available"><p>Table 6</p></div>
                    <div class="table available"><p>Table 7</p></div>
                </div>
            </div>
        </section>
    <footer>
        <div class="footer-content">
            <p>© 2025 Baratie Restaurant · All Rights Reserved</p>
        </div>
    </footer>
        <script>

const RESERVE_TIME = 60000;

function reserve(table) {
    const tableId = table.querySelector("p").innerText;
    if (!table.classList.contains("available")) return;
    table.classList.remove("available");
    table.classList.add("reserved");
    const expires = Date.now() + RESERVE_TIME;
    localStorage.setItem(tableId, expires);
    window.location.href = "tablecheckout.html";
}

function restoreReservations() {
    const tables = document.querySelectorAll(".table");
    tables.forEach(table => {
        const tableId = table.querySelector("p").innerText;
        const expires = localStorage.getItem(tableId);
        if (!expires) return;
        if (Date.now() > Number(expires)) {
            localStorage.removeItem(tableId);
            return;
        }

        table.classList.remove("available");
        table.classList.add("reserved");
        const remaining = Number(expires) - Date.now();
        setTimeout(() => {
            table.classList.remove("reserved");
            table.classList.add("available");
            localStorage.removeItem(tableId);
        }, remaining);
    });
}

window.onload = restoreReservations;


        </script>
        <script src="../script.js"></script>
    </body>
</html>