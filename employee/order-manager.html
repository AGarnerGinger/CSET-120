<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Baratie | Order Manager</title>
    <link href="https://fonts.googleapis.com/css2?family=Marcellus&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../style.css">

    <style>
        html,body{
            height:100%;
            margin:0;
            font-family:"Open Sans",sans-serif;
        }

        body{
            background-image: url(../images/baratieplanks.png);
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            padding-top:100px;
            min-height:100vh;
        }

        .navbar{
            position:fixed;
            top:0;
            left:0;
            right:0;
            display:flex;
            align-items:center;
            justify-content:space-between;
            padding:12px 24px;
            background: rgba(255,255,255,0.88);
            backdrop-filter: blur(6px);
            z-index:1200;
        }

        .navlogo{
            height:46px;
        }

        .nav-links{
            list-style:none;
            display:flex;
            gap:18px;
            padding:0;
            margin:0;
        }

        .nav-links a{
            text-decoration:none;
            padding:8px 16px;
            border-radius:20px;
            font-weight:600;
            color:#222;
        }

        .nav-links a:hover{
            background:black;
            color:white;
        }

        .container{
            max-width:900px;
            margin:0 auto;
            padding:20px;
        }

        .section-header{
            font-family:'Marcellus', serif;
            font-size:30px;
            margin:20px 0;
        }

        .order-box{
            border-radius:15px;
            padding:20px;
            margin:20px 0;
            box-shadow:0 4px 12px rgba(0,0,0,0.2);
            background:rgba(0,0,0,0.18); 
        }

        .order-header{
            font-size:20px;
            font-weight:bold;
            padding-bottom:8px;
            margin-bottom:12px;
        }

        .order-item{
            font-size:17px;
            padding:4px 0;
        }

        .order-buttons{
            margin-top:12px;
            display:flex;
            gap:10px;
        }

        .accept-btn{
            padding:10px;
            border:none;
            font-weight:bold;
            border-radius:10px;
            cursor:pointer;
            background-color: green;
            color: white;
        }

        .deny-btn{
            padding:10px;
            border:none;
            font-weight:bold;
            border-radius:10px;
            cursor:pointer;
            background-color: red;
            color: white;
        }
    </style>
</head>

<body>

<header>
    <nav class="navbar">
        <div class="nav-left">
            <a href="../index.html"><img src="../images/baratie_transparent-2.png" class="navlogo"></a>
            <span class="nav-title">Baratie</span>
        </div>
        <ul class="nav-links">
            <li><a href="accepted.html">Accepted Orders</a></li>
            <li><a href="inventory.html">Inventory</a></li>
            <li><a href="order-manager.html">Order Management</a></li>
        </ul>
    </nav>
</header>

<main class="container">
    <section>
        <h2 class="section-header">Incoming Orders</h2>

        <div class="external-output" id="orders-container"></div>

    </section>
</main>

<footer class="main-footer">
    <div>Baratie</div>
</footer>

<script>
    const container = document.getElementById("orders-container");

    const latestOrder = JSON.parse(localStorage.getItem("customOrder") || "[]");
    const allOrders = JSON.parse(localStorage.getItem("allOrders") || "[]");

    if (latestOrder.length > 0) {
        allOrders.push(latestOrder);
        localStorage.setItem("allOrders", JSON.stringify(allOrders));
        localStorage.removeItem("customOrder");
    }

    container.innerHTML = "";

    allOrders.forEach((order, index) => {
        let html = `
            <div class="order-box">
                <div class="order-header">Order #${index + 1}</div>
        `;

        order.forEach(item => {
            html += `
                <div class="order-item"><strong>${item.title}</strong> â€” Qty: ${item.quantity}</div>
            `;
        });

        html += `
                <div class="order-buttons">
                    <button class="accept-btn" data-index="${index}">ACCEPT</button>
                    <button class="deny-btn">DENY</button>
                </div>
            </div>
        `;

        container.innerHTML += html;

    });
    

</script>

</body>
</html>
